#### 인덱스란 무엇인가요?

인덱스란 데이터베이스에서 저장 성능을 희생하고 검색 속도를 향상시키기 위해 사용되는 기능입니다.

#### 인덱스는 어떤 자료구조로 되어있나요?

B트리의 변형인 B+트리 자료구조입니다.

이진 탐색 트리와 비교했을 때, B트리는 많은 자식노드를 가질 수 있어 빠르게 값의 범위를 좁힐 수 있어 디스크에 있는 블록을 I/O 하는 횟수가 적습니다. 또한 하나의 노드에 많은 데이터를 가질 수 있어 블록 단위로 읽을 때 효율적입니다.

B+트리와 B트리와 다르게 리프노드에만 실제 데이터를 찾아가기 위한 주소값이 저장되어 있고, 리프 노드를 제외한 노드들은 자식 노드로 포인터값을 가집니다. 또한 리프노드 끼리 링크드 리스트로 연결되어 있어, 범위 검색이나 인덱스 풀 스캔 시 빠르게 검색을 할 수 있습니다.

인덱스의 장단점은 무엇인가요?

인덱스는 정렬되어있기 때문에 검색 시, 빠르게 찾을 수 있다. 이는 SELECT 외에도 DELETE, UPDATE 쿼리를 수행할때도 값을 빠르게 찾고 제거, 수정이 가능합니다.

하지만 값을 INSERT, UPDATE, DELETE 하는 과정에서 매번 인덱스에 추가적인 연산을 수행해야하며, 추가적인 저장공간을 필요료합니다. (인덱스는 DELETE 불가, 사용안함플래그설정뿐)

또한 인덱스 스캔 과정에서 실제 레코드 한 건 한 건을 읽을때마다 랜덤 I/O 발생하여 매번 시스템 콜 발생한다. 그래서 전체 데이터의 20~25퍼 이상을 읽으면 풀테이블 스캔이 유리 

#### 인덱스를 어떤 조건에서 설정하면 좋을까요?

- where 절에 사용되는 컬럼, join 문, order by 를 사용하는 쿼리가 있는 경우
- 데이터의 개수가 많은 경우
- 선택도가 낮고 카디널리티가 높은 컬럼에 설정하는 것이 좋다. 선택도가 낮고, 카디널리티가 높을수록 조회되는 데이터가 적기때문에 값을 효율적으로 찾을 수 있다.

#### 선택도와 카디널리티

선택도

선택도란 테이블의 특정 열을 기준으로 해당 열의 조건절에 의해 선택될 것으로 예상되는 데이터의 비율을 말합니다. 만약 해당 열의 중복값이 적을 경우 선택도가 낮다고 평가할 수 있습니다.

- 한 컬럼의 선택도가 10% 라면 이 컬럼을 기준으로 WHERE 절을 사용했을 때 약 10%의 레코드가 조회된다.
    - 선택도가 50% 인곳에서 원하는 값을 찾는것보다 더 빨리 찾을 수 있다.
- 선택도가 낮으면 원하는 데이터를 더 빨리 찾을 수 있다.
- 선택도가 낮으면 인덱스의 후보가 되기 좋다.

카디널리티

특정 데이터 집합의 유니크한 값의 개수

- 주민등록번호: 카디널리티 높다.
- 이름: 중간
- 성별:카디널리티가 낮다.

#### 클러스터링 인덱스
PK 값으로  자동 생성되는 인덱스, PK 값에 의해 물리적 저장위치가 결정된다.
