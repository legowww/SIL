`CORS`: ì„œë²„ ìì›ì„ ë³´í˜¸í•˜ê¸° ìœ„í•œ ê·œì¹™

`Origin`: URL ì˜ í”„ë¡œí† ì½œ/í˜¸ìŠ¤íŠ¸/í¬íŠ¸ê°€ ê°™ìœ¼ë©´ ì¶œì²˜ê°€ ê°™ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.

`Cross-Origin-Request`: ë‹¤ë¥¸ ì¶œì²˜ì˜ ìì›ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ìš”ì²­
 
 `SOP`: ì›¹ ë¸Œë¼ìš°ì €ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë‹¨ì¼ ì¶œì²˜ ì •ì±…

### SOP
ê°™ì€ ì¶œì²˜ì— ìˆëŠ” ìì›ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì›¹ ë¸Œë¼ìš°ì €ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì •ì±…ì´ë‹¤.

XSS, CSRF ê°™ì€ ê³µê²©ì´ ë°œìƒí•˜ì—¬ ì¿ í‚¤ë‚˜ í† í°ê°™ì€ ê°œì¸ì •ë³´ê°€ ë“¤ì–´ìˆëŠ” ì •ë³´ë¥¼ ë‹¤ë¥¸ ì¶œì²˜ì˜ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ë‚´ê²Œ ë  ê²½ìš° ë³´ì•ˆ ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. 

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì¶œì²˜ê°€ ë‹¤ë¥¸ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê±°ë‚˜ ì‘ë‹µì„ ë°›ëŠ” ê²ƒì„ ì°¨ë‹¨í•œë‹¤.

---
### CORS
CORS ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì˜ `SOP` ë¥¼ ìœ„ë°˜í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” í˜„ìƒì´ë‹¤. 

ì„œë²„ëŠ” ìš”ì²­ì— ëŒ€í•´ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì„ í•´ì£¼ì§€ë§Œ ì›¹ ë¸Œë¼ìš°ì € ìì²´ì ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.


ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì¶œì²˜ê°€ `localhost:3000` ì¸ HTML íŒŒì¼ì„ í†µí•´ `localhost:4000` ì˜ ìì›ì„ ìš”ì²­í•  ê²½ìš° CORS ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. 

í•˜ì§€ë§Œ `localhost:3000` ì„œë²„ì—ì„œ `localhost:4000` ì— CURL ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš°ì—ëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì´ ë°˜í™˜ëœë‹¤. 




---
### í´ë¼ì´ì–¸íŠ¸-ì„œë²„ Header

1. 
`Origin`: http://localhost:3000 `Access-Control-Allow-Origin`: http://localhost:3000 

ì›¹ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ HTTP ì˜ Origin ê°’ì´ ì‘ë‹µ HTTP ì˜ Access-Control-Allow-Origin í—¤ë”ì— ì¡´ì¬í•  ê²½ìš° êµì°¨ ì¶œì²˜ ìš”ì²­ì„ í—ˆìš©í•œë‹¤.


2. 
`Access-Control-Request-Headers`: Foo `Access-Control-Allow-Headers`: Foo
ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì˜ˆë¹„ ìš”ì²­ì˜ Access-Control-Request-Headers í—¤ë”ì— ì‚¬ìš©ëœ í—¤ë”ê°€ ì‘ë‹µ HTTP ì˜ Access-Control-Allow-Headers ì— ì¡´ì¬í•  ê²½ìš° êµì°¨ ì¶œì²˜ ìš”ì²­ì„ í—ˆìš©í•œë‹¤.


3. 
`Access-Control-Request-Methods`: PUT `Access-Control-Allow-Methods`: PUT
ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì˜ˆë¹„ ìš”ì²­ì˜ Access-Control-Request-Methods í—¤ë”ì— ì‚¬ìš©ëœ ë©”ì„œë“œê°€ ì‘ë‹µ HTTP ì˜ Access-Control-Allow-Method ì— ì¡´ì¬í•  ê²½ìš° êµì°¨ ì¶œì²˜ ìš”ì²­ì„ í—ˆìš©í•œë‹¤.

4. 
`Access-Control-Max-Age`: 5
5ì´ˆ ì•ˆì— ë‹¤ì‹œ ìš”ì²­í•˜ë©´ ì˜ˆë¹„ ìš”ì²­ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì˜ˆë¹„ ìš”ì²­ì„ ìºì‹±í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.

---
### ë‹¨ìˆœ ìš”ì²­

- GET, POST, HEAD
- ì•ˆì „í•œ í—¤ë”
    - Accept
    - Accept-Language
    - Content-Language
    - Content-Type

ìœ„ ì¡°ê±´ì„ ì¶©ì¡±í•  ê²½ìš° ì˜ˆë¹„ ìš”ì²­ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ CORS í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤. 

í•˜ì§€ë§Œ `application/x-www-form-urlencoded`, `multipart/form-data`, `text/plain` Content-Type ë§Œì„ í—ˆìš©í•˜ê¸° ë•Œë¬¸ì— `application/json` ì„ ì‚¬ìš©í•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ìš”ì²­ì—ì„œëŠ” ì‚¬ìš©ë  ìˆ˜ ì—†ë‹¤. 

ë”°ë¼ì„œ ëŒ€ë¶€ë¶„ì˜ ìš”ì²­ì€ ì˜ˆë¹„ ìš”ì²­ì„ ì‚¬ìš©í•œë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤. 

---
### ì˜ˆë¹„ ìš”ì²­
OPTIONS ë¼ëŠ” HTTP ë©”ì„œë“œë¥¼ í†µí•´ ìš”ì²­í•œë‹¤.
`204 NO CONTENT` ìƒíƒœ ì½”ë“œë¥¼ ê°€ì§„ë‹¤.

Access-Control-Request-Headers, Access-Control-Request-Methods ë“±ì˜ í—¤ë”ë¥¼ ì˜ˆë¹„ ìš”ì²­ì— ë‹´ì•„ì„œ ì„œë²„ì— ì „ì†¡í•œë‹¤. ì˜ˆë¹„ ìš”ì²­ì„ ìµœì†Œí™” í•˜ê¸° ìœ„í•´ ì„œë²„ ì¸¡ì—ì„œëŠ” `Access-Control-Max-Age` ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

---
### ì¸ì¦ëœ ìš”ì²­
ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë³„ë„ì˜ ìš”ì²­ ì—†ì´ëŠ” ì¿ í‚¤ì™€ ê°™ì€ ì¸ì¦ ë°ì´í„°ë¥¼ ìš”ì²­ ë°ì´í„°ì— ë„£ì§€ ì•ŠëŠ”ë‹¤. ì´ë•Œ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ì¿ í‚¤ë¥¼ í†µí•´ì„œ ì¸ì¦ì„ í•´ì•¼ í•˜ëŠ” ê²½ìš° í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œëŠ” credentials ì˜µì…˜ì„ ì„¤ì •í•˜ê³ , ì„œë²„ ì¸¡ì—ì„œëŠ” `Access-Control-Allow-Credentials : true` ë¥¼ ì„¤ì •í•œë‹¤.

---
> REF
- https://www.youtube.com/watch?v=zA_YAuwPrcA&t=1025s
- https://jeonghwan-kim.github.io/2023/12/12/cors
- https://inpa.tistory.com/entry/WEB-ğŸ“š-CORS-ğŸ’¯-ì •ë¦¬-í•´ê²°-ë°©ë²•-ğŸ‘#
